# –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π AndroidManifest.xml

**APK-Manifest-Extractor** ‚Äî —ç—Ç–æ –ª—ë–≥–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–∞ Python, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–π–ª–∞ `AndroidManifest.xml` –∏–∑ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (`.apk`, `.aab`) –∏–ª–∏ —É–∂–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

–°–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
- –∏–º—è –ø–∞–∫–µ—Ç–∞ (`packageName`)
- –≤–µ—Ä—Å–∏–∏ (`versionName`, `versionCode`)
- –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∏ —Ü–µ–ª–µ–≤—É—é –≤–µ—Ä—Å–∏—é SDK
- —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (permissions)
- –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Å–µ—Ä–≤–∏—Å—ã, —Ä–µ—Å–∏–≤–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- —Ñ–ª–∞–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`debuggable`, `allowBackup`, `usesCleartextTraffic`)
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ñ–∏—á–∏ (`uses-feature`)
- —Å–µ–∫—Ü–∏—é `queries` (Android 11+)

–ü—Ä–∏ —ç—Ç–æ–º **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ APK/AAB** ‚Äî –º–∞–Ω–∏—Ñ–µ—Å—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∞—Ä—Ö–∏–≤–∞.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: `.apk`, `.aab`, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π  
‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ `AndroidManifest.xml`  
‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (activities, services, providers, receivers)  
‚úÖ –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏ SDK-–≤–µ—Ä—Å–∏–π  
‚úÖ –í—ã–≤–æ–¥ –≤ —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ **–∏–ª–∏** –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤  
‚úÖ –†–∞–±–æ—Ç–∞ –±–µ–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –∞—Ä—Ö–∏–≤–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `zipfile`)  
‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üß† –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1Ô∏è‚É£ –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ APK
```bash
python3 manifest.py app.apk
````

### 2Ô∏è‚É£ –í—ã–≤–æ–¥ –≤ JSON (–≤ –∫–æ–Ω—Å–æ–ª—å)

```bash
python3 manifest.py app.apk --json --pretty
```

### 3Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –≤ —Ñ–∞–π–ª

```bash
python3 manifest.py app.apk --json -o manifest.json
```

### 4Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö APK —Å—Ä–∞–∑—É

```bash
python3 manifest.py ./apks --json --pretty
```

---

## üìã –ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞

```
Package: com.example.app
Version: 1.2.3 (123)
SDK: min=23 target=34
App: label=@string/app_name icon=@mipmap/ic_launcher debuggable=False allowBackup=True

Permissions (1):
  - android.permission.INTERNET

Activities (1):
  - com.example.MainActivity exported=True
      * action=android.intent.action.MAIN
      * category=android.intent.category.LAUNCHER
```

---

## üßæ –ü—Ä–∏–º–µ—Ä JSON-–≤—ã–≤–æ–¥–∞

```json
{
  "source": "app.apk",
  "packageName": "com.example.app",
  "versionName": "1.2.3",
  "versionCode": 123,
  "sdk": {
    "min": 23,
    "target": 34,
    "max": null
  },
  "application": {
    "label": "@string/app_name",
    "icon": "@mipmap/ic_launcher",
    "debuggable": false,
    "allowBackup": true,
    "usesCleartextTraffic": false
  },
  "permissions": [
    {"name": "android.permission.INTERNET"}
  ],
  "activities": [
    {
      "name": "com.example.MainActivity",
      "exported": true,
      "intentFilters": [
        {"actions": ["android.intent.action.MAIN"], "categories": ["android.intent.category.LAUNCHER"]}
      ]
    }
  ],
  "providers": [],
  "features": [],
  "queries": {}
}
```

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.8+

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Python —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ:

```bash
python3 --version
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `androguard` –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ XML:

```bash
pip install androguard
```

*(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `lxml` –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ XML-–ø–∞—Ä—Å–∏–Ω–≥–∞.)*

---

## üöÄ –ó–∞–ø—É—Å–∫

–°–∫–∞—á–∞—Ç—å –∏–ª–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/Android-RU/APK-Manifest-Extractor.git
cd APK-Manifest-Extractor
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:

```bash
python3 manifest.py <–ø—É—Ç—å_–∫_APK_–∏–ª–∏_AAB>
```

---

## üß© –û–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ê—Ä–≥—É–º–µ–Ω—Ç            | –û–ø–∏—Å–∞–Ω–∏–µ                           |
| ------------------- | ---------------------------------- |
| `SOURCE`            | –ü—É—Ç—å –∫ `.apk`, `.aab` –∏–ª–∏ –∫–∞—Ç–∞–ª–æ–≥—É |
| `-j, --json`        | –í—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON               |
| `-o, --output FILE` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å JSON –≤ —Ñ–∞–π–ª              |
| `--pretty`          | –ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON       |
| `-v, --verbose`     | –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏                     |
| `-h, --help`        | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º              |

---

## üß© –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è APK –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π:

```bash
python3 manifest.py app-release.apk --json -o report.json
jq '.permissions | length' report.json
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ targetSdkVersion –≤ CI:

```bash
python3 manifest.py app.apk --json | jq '.sdk.target'
```

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python ‚â• 3.8
* androguard ‚â• 3.3.5
* (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) lxml

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**. –°–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –≤ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã.
